<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">

<!--
`darksky-forecast`
Polymer web component for Dark Sky forecast API

@demo demo/index.html
-->

<dom-module id="darksky-forecast">
  <template>
    <iron-ajax
      id="iron_ajax"
      auto="[[auto]]"
      handle-as="json"
      loading="{{loading}}"
      url="[[_computeUrl(apiKey, latitude, longitude)]]"
      last-response="{{response}}">
    </iron-ajax>
  </template>

  <script>
    Polymer({

      is: 'darksky-forecast',

      properties: {

        /**
         * Dark Sky API key. (Required)
         *
         * Get this from https://darksky.net/dev/account
         *
         * It looks like this: '0c91dff60f9a0f4f3328d39ee828341a'
         */
        apiKey: String,

        /**
         * The latitude of a geolocation. (Required)
         *
         * e.g 37.8267
         */
        latitude: Number,

        /**
         * The longitude of a geolocation. (Required)
         *
         * e.g -122.4233
         */
        longitude: Number,

        auto: {
          type: Boolean,
          value: false
        },

        loading: {
          type: Boolean,
          notify: true,
          readOnly: true
        },

        response: {
          type: Object,
          notify: true,
          readOnly: true
        }
      },

      _computeUrl: function(apiKey, latitude, longitude) {
        return "https://api.darksky.net/forecast/" + apiKey + "/" + latitude.toString() + "," + longitude.toString();
      }

    });
  </script>
</dom-module>
