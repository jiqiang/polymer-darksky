<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">

<!--
`darksky-forecast`
Polymer web component for Dark Sky forecast API

@demo demo/index.html
-->

<dom-module id="darksky-forecast">
  <template>
    <iron-ajax
      id="iron_ajax"
      auto="[[auto]]"
      handle-as="json"
      loading="{{loading}}"
      url="[[_computeUrl(apiKey, latitude, longitude)]]"
      last-response="{{response}}">
    </iron-ajax>
  </template>

  <script>
    Polymer({

      is: 'darksky-forecast',

      properties: {
        apiKey: {
          type: String,
          value: ''
        },

        latitude: {
          type: String,
          value: ''
        },

        longitude: {
          type: String,
          value: ''
        },

        auto: {
          type: Boolean,
          value: false
        },

        loading: {
          type: Boolean,
          notify: true,
          readOnly: true
        },

        response: {
          type: Object,
          notify: true,
          readOnly: true
        }
      },

      _computeUrl: function(apiKey, latitude, longitude) {
        return "https://api.darksky.net/forecast/" + apiKey + "/" + latitude + "," + longitude;
      }

    });
  </script>
</dom-module>
